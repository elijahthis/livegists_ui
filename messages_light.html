<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages</title>
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/messages_light.css" />
</head>
<body>
    <div class="image_overlay">
        <div id="preview_image">
            <img src="images/cancel-black.png" id="cancel-image" />
            Preview
        </div>
        <div class="img-with-caption">
            <img src="images/uploaded-image-1.png" class="preview_uploaded_image" />
            <div>
                <input type="text" class="caption_text" size="58" placeholder="Add a caption..."/>
                <img src="images/send-message_light.png" class="send-message" />
            </div>
        </div>
        <div class="add_file">
            <div><img src="images/uploaded-image-1.png"></div>
            <div>
                <img src="images/add-black.png" id="add-plus" />
                ADD FILE
            </div>
        </div>
    </div>
    <div class="image-expand-overlay">
        <div class="image-expand-buttons">
            <img src="images/download-icon-black.png" />
            <img src="images/cancel-black.png" />
        </div>
        <div class="image-expand-body">
            <img src="images/uploaded-image-1.png" />
        </div>
        <div class="image-expand-foot">
        </div>
    </div>

    <div class="side_popup">
        <div class="clear_top">
            <div class="circle_crop">
                <img src="images/Cole.jpg" class="my_profile_pic" />
            </div>
            <div class="messages">Messages</div>
        </div>
        <div class="search_messages">
            <div class="messages_search_wrapper">
                <button> <img class="messages-search-icon" src="images/search-button_light.png"/> </button>
                <input class="messages-search" type="search" placeholder="Search or start a new chat" />
            </div>
        </div>
        <div class="my_messages">
            <a href="#" class="link--message-one">
                <div class="message-one">
                    <div class="circle_crop">
                        <img src="images/klaus.png" class="" />
                    </div>
                    <div class="message_text">
                        <span class="their_name">Noob Coder Red</span>
                        <span class="their_display_text">Hey boss, when are we going to start the project it's
                            been...</span>
                    </div>
                    <div class="unread_data">
                        <div class="their_time_stamp">2:00 PM</div>
                        <div class="unread_count">3</div>
                    </div>
                </div>
            </a>
            <a href="#" class="link--message-one">
                <div class="message-one">
                    <div class="circle_crop">
                        <img src="images/klaus.png" class="" />
                    </div>
                    <div class="message_text">
                        <span class="their_name">Noob Coder Red</span>
                        <span class="their_display_text">Hey boss, when are we going to start the project it's
                            been...</span>
                    </div>
                    <div class="unread_data">
                        <div class="their_time_stamp">2:00 PM</div>
                        <div class="unread_count">3</div>
                    </div>
                </div>
            </a>
            <a href="#" class="link--message-one">
                <div class="message-one">
                    <div class="circle_crop">
                        <img src="images/klaus.png" class="" />
                    </div>
                    <div class="message_text">
                        <span class="their_name">Noob Coder Red</span>
                        <span class="their_display_text">Hey boss, when are we going to start the project it's
                            been...</span>
                    </div>
                    <div class="unread_data">
                        <div class="their_time_stamp">2:00 PM</div>
                        <div class="unread_count">3</div>
                    </div>
                </div>
            </a>
            <a href="#" class="link--message-one">
                <div class="message-one">
                    <div class="circle_crop">
                        <img src="images/klaus.png" class="" />
                    </div>
                    <div class="message_text">
                        <span class="their_name">Noob Coder Red</span>
                        <span class="their_display_text">Hey boss, when are we going to start the project it's
                            been...</span>
                    </div>
                    <div class="unread_data">
                        <div class="their_time_stamp">2:00 PM</div>
                        <div class="unread_count">3</div>
                    </div>
                </div>
            </a>
            <a href="#" class="link--message-one">
                <div class="message-one">
                    <div class="circle_crop">
                        <img src="images/klaus.png" class="" />
                    </div>
                    <div class="message_text">
                        <span class="their_name">Noob Coder Red</span>
                        <span class="their_display_text">Hey boss, when are we going to start the project it's
                            been...</span>
                    </div>
                    <div class="unread_data">
                        <div class="their_time_stamp">2:00 PM</div>
                        <div class="unread_count">3</div>
                    </div>
                </div>
            </a>
            <a href="#" class="link--message-one">
                <div class="message-one">
                    <div class="circle_crop">
                        <img src="images/klaus.png" class="" />
                    </div>
                    <div class="message_text">
                        <span class="their_name">Noob Coder Red</span>
                        <span class="their_display_text">Hey boss, when are we going to start the project it's
                            been...</span>
                    </div>
                    <div class="unread_data">
                        <div class="their_time_stamp">2:00 PM</div>
                        <div class="unread_count">3</div>
                    </div>
                </div>
            </a>
            <a href="#" class="link--message-one">
                <div class="message-one">
                    <div class="circle_crop">
                        <img src="images/klaus.png" class="" />
                    </div>
                    <div class="message_text">
                        <span class="their_name">Noob Coder Red</span>
                        <span class="their_display_text">Hey boss, when are we going to start the project it's
                            been...</span>
                    </div>
                    <div class="unread_data">
                        <div class="their_time_stamp">2:00 PM</div>
                        <div class="unread_count">3</div>
                    </div>
                </div>
            </a>
            <a href="#" class="link--message-one">
                <div class="message-one">
                    <div class="circle_crop">
                        <img src="images/klaus.png" class="" />
                    </div>
                    <div class="message_text">
                        <span class="their_name">Noob Coder Red</span>
                        <span class="their_display_text">Hey boss, when are we going to start the project it's
                            been...</span>
                    </div>
                    <div class="unread_data">
                        <div class="their_time_stamp">2:00 PM</div>
                        <div class="unread_count">3</div>
                    </div>
                </div>
            </a>
            <a href="#" class="link--message-one">
                <div class="message-one">
                    <div class="circle_crop">
                        <img src="images/klaus.png" class="" />
                    </div>
                    <div class="message_text">
                        <span class="their_name">Noob Coder Red</span>
                        <span class="their_display_text">Hey boss, when are we going to start the project it's
                            been...</span>
                    </div>
                    <div class="unread_data">
                        <div class="their_time_stamp">2:00 PM</div>
                        <div class="unread_count">3</div>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <div class="main">
        <div class="messages_head">
            <img src="images/back_light.png" class="back_button" />
            <div class="your_info">
                <img src="images/jorja.png" class="your_profile_image" />
                <div>
                    <span id="your_name">Noob Coder Izzy</span><br />
                    <span id="active_status">Active Now</span>
                </div>
            </div>
            <img src="images/menu_light.png" class="menu_button" />
        </div>
        <div class="messages_body">
            <div>
                <div class="message_box mine">
                    Ali?
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box yours">
                    Yeah?
                    <div class="time_stamp">
                        4:44 AM
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    I just don't really plan on being there that long.
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    And that's um...That's the tough part about all this, you know?
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box yours">
                    I get it. We're living in dark times.
                    <div class="time_stamp">
                        4:44 AM
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box yours">
                    Huh. Not a lot of hope out there.
                    <div class="time_stamp">
                        4:44 AM
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box yours">
                    The thing I miss about doing drugs is the beauty.
                    No matter what's going on in the world, No matter what's going on in your life, everything's gonna
                    be okay.
                    <div class="time_stamp">
                        4:44 AM
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    Yeah.
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    The world's just really fucking ugly, you know.
                    It's really fucking ugly and, um... everybody seems to be okay with it, you know.
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    The anger. The level of anger...
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    Everyone's just out to make everyone else not seem human.
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    And I don't really wanna be a part of it.
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    I don't even wanna witness it.
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    Sure, it's not, like, the root of all my problems, but I definitely think about it, a lot.
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box yours">
                    Because thinking about those questions, those ideas, they're a large part of uh...
                    what makes this life worth living. Right?
                    <div class="time_stamp">
                        4:44 AM
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box yours">
                    That's what I was talking about earlier. You gotta believe in the poetry...
                    <div class="time_stamp">
                        4:44 AM
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box yours">
                    The value of two people sitting in a diner on Christmas Eve, talking about... life, addiction, loss.
                    <div class="time_stamp">
                        4:44 AM
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box yours">
                    <div class="uploaded-image-parent">
                        <img src="images/uploaded-image.png" class="uploaded-image" />
                    </div>
                    <!-- <div class="image-expand-overlay">
                        <div class="image-expand-buttons">
                            <img src="images/download-icon-black.png" />
                            <img src="images/cancel-black.png" />
                        </div>
                        <div class="image-expand-body">
                            <img src="images/uploaded-image-1.png" />
                        </div>
                        <div class="image-expand-foot">
                        </div>
                    </div> -->
                    <div> beauty </div>
                    <div class="time_stamp">
                        4:44 AM
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    <div class="uploaded-image-parent">
                        <img src="images/uploaded-image-1.png" class="uploaded-image" />
                    </div>
                    <div> Interesting...</div>
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box mine">
                    <div class="audio_container">
                        <img src="images/jorja.png" class="your_profile_image" />
                        <audio src="other_media/test-audio-2.mp3" id="new_audio"></audio>
                        <button id="play_pause_button" onclick="play_pause()">
                            <img src="images/play-black.png" class="play_or_pause" />
                        </button>
                        <div class="progress_container">
                            <div class="progress"></div>
                        </div>
                    </div>
                    <div class="time_stamp">
                        4:44 AM
                        <img src="images/double-tick-black.png" class="double_tick" />
                    </div>
                </div>
            </div>
            <div>
                <div class="message_box yours">
                    Sick! Try this...
                    <div class="time_stamp">
                        4:44 AM
                    </div>
                </div>
            </div>
        </div>
        <div class="messages_tools">
            <div>
                <img src="images/emoji_light.png" />
                <img src="images/image-upload_light.png" class="button--image-upload"/>
                <img src="images/voice_light.png" />
            </div>
            <input type="text" id="new_message" name="new_message" />
            <img src="images/send-message_light.png" />
        </div>
    </div>
    
    <script>
        // this script is for the audio player app...
        var seeking;
        const the_audio = document.getElementById("new_audio");
        const the_button = document.getElementById("play_pause_button");
        const progress = document.querySelector(".progress");
        const progress_container = document.querySelector(".progress_container");
        /* 		--------- Event Listeners --------- */
        the_audio.addEventListener("timeupdate", updateProgress);

        progress_container.addEventListener("mousedown", function (event) {
            seeking = true;
            setProgress(event);
        });
        progress_container.addEventListener("mousemove", function (event) {
            setProgress(event);
        });
        progress_container.addEventListener("mouseup", function () {
            seeking = false;
        });
        /*	---------------------------------------- */

        function play_pause() {
            // This function handles the playing and pausing of the music, and the switching of the buttons.
            const the_audio = document.getElementById("new_audio");
            const the_button = document.getElementById("play_pause_button");
            const play = "images/play-black.png";
            const pause = "images/pause-black.png";

            if (the_audio.paused) {
                the_audio.play();
                the_button.childNodes[1].src = pause;
            }
            else {
                the_audio.pause();
                the_button.childNodes[1].src = play;
            }
        }

        function updateProgress(event) {
            // this function updates the position of the seekbaras the audio plays.
            const progressPercent = (the_audio.currentTime / the_audio.duration) * 100;
            progress.style.width = `${progressPercent}%`;
        }

        function setProgress(event) {
            // this function sets the position of the seekbar as you click on it.
            if (seeking) {
                const width = progress_container.clientWidth;
                const clickX = event.offsetX;
                const duration = the_audio.duration;

                the_audio.currentTime = (clickX / width) * duration;
            }
        }
    </script>

    <script>
        const textInput = document.querySelector("#new_message");
        const footer = document.getElementsByClassName("messages_tools");
        const messages_body = document.querySelector(".messages_body");
        const back_button = document.querySelector(".back_button");
        const menu_button = document.querySelector(".menu_button")
        const side_popup = document.querySelector(".side_popup");
        const body = document.querySelector("body");
        const my_messages = document.querySelector(".my_messages");
        const image_overlay = document.querySelector(".image_overlay")
        const image_upload_button = document.querySelector(".button--image-upload")
        const cancel_image = document.querySelector("#cancel-image")
        const main = document.querySelector(".main")

        dynamic_size = Math.round((0.72 * footer[0].offsetWidth) / 16);
        textInput.setAttribute("size", Math.round((0.72 * footer[0].offsetWidth) / 10));

        back_button.addEventListener("click", function () {
            side_popup.style.display = "none";
            body.style.display = "block";
        })
        menu_button.addEventListener("click", function () {
            body.style.display = "grid";
            side_popup.style.display = "grid";
        })
        image_upload_button.addEventListener("click", function() {
            image_overlay.style.display = "grid";
        })
        cancel_image.addEventListener("click", function() {
            image_overlay.style.display = "none";
        })


    </script>
</body>
</html>